@page "/"

<PageTitle>پرسشنامه آنلاین پژوهش سنجش ترس از بازگشت سرطان در مراقبین خانوادگی بیماران سرطانی</PageTitle>

@rendermode InteractiveServer

<main class="container">
    <div class="content">
        <h1>ممنونیم که برای کمک به این پژوهش با ما همکاری می کنید.</h1>

        <p>
            پرسشنامه آنلاین پژوهش سنجش ترس از بازگشت سرطان در مراقبین خانوادگی بیماران سرطانی
        </p>
        <button @onclick="StartProgress">شروع پاسخگویی</button>
    </div>
</main>

@code {
    protected async Task StartProgress()
    {
        using var context = DbContextFactory.CreateDbContext();

        Participant participant = new Participant();
        participant.Id = Guid.NewGuid();
        participant.SubmissionTime = DateTime.UtcNow;

        try
        {
            context.Participants.Add(participant);
            await context.SaveChangesAsync();
            await localStorage.SetItemAsync("participantId", participant.Id);
            NavigationManager.NavigateTo($"/Progress");
        }
        catch
        {

        }
    }
}